parmetis_c_args = ['-DUSE_GKREGEX']
parmetis_include = include_directories(['include','libparmetis'])
parmetis = static_library('parmetis',
           'libparmetis/frename.c',
           'libparmetis/comm.c',
           'libparmetis/mesh.c',
           'libparmetis/pspases.c',
           'libparmetis/ctrl.c',
           'libparmetis/wave.c',
           'libparmetis/balancemylink.c',
           'libparmetis/redomylink.c',
           'libparmetis/util.c',
           'libparmetis/remap.c',
           'libparmetis/node_refine.c',
           'libparmetis/timer.c',
           'libparmetis/rmetis.c',
           'libparmetis/xyzpart.c',
           'libparmetis/stat.c',
           'libparmetis/gkmpi.c',
           'libparmetis/akwayfm.c',
           'libparmetis/selectq.c',
           'libparmetis/msetup.c',
           'libparmetis/mdiffusion.c',
           'libparmetis/kwayrefine.c',
           'libparmetis/serial.c',
           'libparmetis/initmsection.c',
           'libparmetis/kmetis.c',
           'libparmetis/renumber.c',
           'libparmetis/csrmatch.c',
           'libparmetis/graph.c',
           'libparmetis/ametis.c',
           'libparmetis/initbalance.c',
           'libparmetis/gkmetis.c',
           'libparmetis/weird.c',
           'libparmetis/wspace.c',
           'libparmetis/move.c',
           'libparmetis/diffutil.c',
           'libparmetis/initpart.c',
           'libparmetis/debug.c',
           'libparmetis/ometis.c',
           'libparmetis/match.c',
           'libparmetis/mmetis.c',
           install : false, include_directories: parmetis_include,
	   dependencies: [mpi_dep, metis_dep], c_args: parmetis_c_args + metis_default_warnings)

parmetis_dep = declare_dependency(link_with: parmetis, include_directories: parmetis_include)
